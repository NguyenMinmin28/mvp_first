@tailwind base;
@tailwind components;
@tailwind utilities;

/* Import layout fixes */
@import './layout-fixes.css';

/* Import animations */
@import './animations.css';

/* Custom Font Variables */
:root {
  --font-body: "GT Standard M", Arial, sans-serif;
  --font-headline: "GT Standard L", Arial, sans-serif;
  --font-mono: "GT Standard Mono", monospace;
  --font-signature: Handlee, cursive;
}

/* Service Content Font Styles */
.service-description {
  font-family: var(--font-body);
}

@keyframes likePopKeyframe {
  0% { transform: scale(1); }
  50% { transform: scale(1.15); }
  100% { transform: scale(1); }
}

.like-pop {
  animation: likePopKeyframe 0.22s ease-out;
}

@keyframes likeBounceKeyframe {
  0% { transform: translateY(0) scale(1); }
  30% { transform: translateY(-24px) scale(1.08); }
  55% { transform: translateY(0) scale(0.96); }
  75% { transform: translateY(-8px) scale(1.02); }
  100% { transform: translateY(0) scale(1); }
}

.like-bounce {
  animation: likeBounceKeyframe 0.5s cubic-bezier(0.22, 1, 0.36, 1);
}

@keyframes slide-up {
  from {
    transform: translateY(100%);
  }
  to {
    transform: translateY(0);
  }
}

@keyframes anchor-pop {
  0% { transform: translateY(8px); }
  50% { transform: translateY(-4px); }
  100% { transform: translateY(0); }
}

@keyframes anchor-glow {
  0% { box-shadow: 0 0 0 0 rgba(0,0,0,0.35); }
  100% { box-shadow: 0 0 0 18px rgba(0,0,0,0); }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

.hash-pop {
  animation: anchor-pop 800ms ease-out;
}

.hash-glow {
  animation: anchor-glow 1200ms ease-out;
}

/* Hash focus layout + motion utilities */
.hash-zoom {
  transform: scale(1.0125);
  transition: transform 400ms ease, box-shadow 400ms ease;
  box-shadow: 0 16px 32px -12px rgba(0,0,0,0.28);
}

.hash-dim {
  transform: scale(0.995);
  opacity: 0.95;
  transition: transform 300ms ease, opacity 300ms ease, filter 300ms ease;
  filter: saturate(0.96);
}

@media (min-width: 768px) {
  /* Removed spanning to avoid breaking layout */
}

@layer base {
  :root {
    /* Ổn định chiều cao màn hình động cho iOS/Android */
    --app-vh: 100dvh;
    
    --background: 0 0% 100%;
    --foreground: 0 0% 3.9%;

    --card: 0 0% 100%;
    --card-foreground: 0 0% 3.9%;

    --popover: 0 0% 100%;
    --popover-foreground: 0 0% 3.9%;

    --primary: 0 0% 9%;
    --primary-foreground: 0 0% 98%;

    --secondary: 0 0% 96.1%;
    --secondary-foreground: 0 0% 9%;

    --muted: 0 0% 96.1%;
    --muted-foreground: 0 0% 45.1%;

    --accent: 0 0% 96.1%;
    --accent-foreground: 0 0% 9%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 89.8%;
    --input: 0 0% 89.8%;
    --ring: 0 0% 3.9%;

    --radius: 0.5rem;
  }

  .dark {
    --background: 0 0% 3.9%;
    --foreground: 0 0% 98%;

    --card: 0 0% 3.9%;
    --card-foreground: 0 0% 98%;

    --popover: 0 0% 3.9%;
    --popover-foreground: 0 0% 98%;

    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 9%;

    --secondary: 0 0% 14.9%;
    --secondary-foreground: 0 0% 98%;

    --muted: 0 0% 14.9%;
    --muted-foreground: 0 0% 63.9%;

    --accent: 0 0% 14.9%;
    --accent-foreground: 0 0% 98%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;

    --border: 0 0% 14.9%;
    --input: 0 0% 14.9%;
    --ring: 0 0% 83.1%;
  }
}

@layer base {
  * {
    @apply border-border;
  }
  body {
    @apply bg-background text-foreground;
    /* Fix for layout spacing issues */
    margin: 0;
    padding: 0;
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
  }
  html {
    scroll-behavior: smooth;
    /* Remove scrollbar-gutter to prevent side space issues */
    /* scrollbar-gutter: stable both-edges; */
    /* Ensure no horizontal overflow */
    overflow-x: hidden;
    width: 100%;
    margin: 0;
    padding: 0;
  }
  /* Global fix for layout spacing */
  #__next {
    margin: 0;
    padding: 0;
    width: 100%;
    max-width: 100vw;
    overflow-x: hidden;
  }
  
  /* Fix root element */
  html > body {
    width: 100vw;
    max-width: 100vw;
    margin: 0;
    padding: 0;
  }
}

@layer utilities {
  /* Global cursor pointer for interactive elements */
  button, 
  [role="button"], 
  [role="menuitem"],
  a, 
  input[type="button"], 
  input[type="submit"], 
  input[type="reset"],
  .cursor-pointer,
  .clickable {
    cursor: pointer !important;
  }
  
  /* Hover effects for interactive elements */
  button:hover, 
  [role="button"]:hover, 
  [role="menuitem"]:hover,
  a:hover, 
  .cursor-pointer:hover,
  .clickable:hover {
    cursor: pointer !important;
  }

  .line-clamp-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  .line-clamp-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
  
  /* Hide scrollbar for mobile navigation */
  .scrollbar-hide {
    -ms-overflow-style: none;  /* Internet Explorer 10+ */
    scrollbar-width: none;  /* Firefox */
  }
  
  .scrollbar-hide::-webkit-scrollbar {
    display: none;  /* Safari and Chrome */
  }
  
  /* Smooth scrolling for mobile */
  .overflow-x-auto {
    scroll-behavior: smooth;
    -webkit-overflow-scrolling: touch;
  }
  
  /* Viewport stability utilities */
  .min-h-screen-stable {
    min-height: var(--app-vh);
  }
  
  .h-screen-stable {
    height: var(--app-vh);
  }
  
  /* Overflow prevention utilities */
  .break-anywhere {
    word-break: break-word;
    overflow-wrap: anywhere;
  }
  
  .text-ellipsis-safe {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  
  .line-clamp-safe {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    word-break: break-word;
  }
  
  /* Mobile overflow prevention */
  .mobile-overflow-safe {
    max-width: 100%;
    overflow: hidden;
    word-break: break-word;
    overflow-wrap: break-word;
  }
  
  .mobile-text-truncate {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
    max-width: 100%;
  }
  
  /* Animated underline effect - slides from left to right */
  .underline-animated {
    position: relative;
    text-decoration: none;
  }
  
  .underline-animated::after {
    content: '';
    position: absolute;
    bottom: 0;
    left: 0;
    width: 0;
    height: 2px;
    background-color: #000000;
    transition: width 0.3s ease-in-out;
  }
  
  .underline-animated:hover::after {
    width: 100%;
  }
  
  .underline-animated:hover {
    text-decoration: none;
  }
  
  /* Prevent horizontal scroll on mobile */
  .mobile-no-overflow {
    max-width: 100vw;
    overflow-x: hidden;
  }
  
  /* Fix layout spacing issues across devices */
  .layout-fix {
    /* Ensure consistent left margin/padding */
    margin-left: 0 !important;
    padding-left: 1rem !important;
  }
  
  /* Container consistency fix */
  .container {
    padding-left: 1rem !important;
    padding-right: 1rem !important;
  }
  
  /* Responsive container padding */
  @media (min-width: 640px) {
    .container {
      padding-left: 1.5rem !important;
      padding-right: 1.5rem !important;
    }
  }
  
  @media (min-width: 1024px) {
    .container {
      padding-left: 2rem !important;
      padding-right: 2rem !important;
    }
  }
  
  /* Fix for specific layout issues */
  .main-content {
    margin-left: 0 !important;
    padding-left: 1rem !important;
  }
  
  @media (min-width: 640px) {
    .main-content {
      padding-left: 1.5rem !important;
    }
  }
  
  @media (min-width: 1024px) {
    .main-content {
      padding-left: 2rem !important;
    }
  }
}

/* Hide scrollbar for horizontal scroll */
.scrollbar-hide {
  -ms-overflow-style: none;  /* Internet Explorer 10+ */
  scrollbar-width: none;  /* Firefox */
}
.scrollbar-hide::-webkit-scrollbar { 
  display: none;  /* Safari and Chrome */
}

/* Shimmer/Skeleton Loading Effects - Uber-style */
.shimmer {
  position: relative;
  /* Subtle Uber-like neutral base */
  background: linear-gradient(90deg, #f6f7f8 0%, #edeef1 20%, #f6f7f8 40%, #f6f7f8 100%);
  background-size: 200% 100%;
  overflow: hidden;
  border-radius: inherit; /* match container rounding */
}

.shimmer::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(90deg, #f6f7f8 0%, #eef0f2 50%, #f6f7f8 100%);
  background-size: 200% 100%;
  animation: shimmer-base 1.2s linear infinite;
  z-index: 0;
  border-radius: inherit;
}

.shimmer::after {
  content: "";
  position: absolute;
  inset: 0;
  transform: translateX(-100%) skewX(-12deg);
  width: 40%;
  background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.35) 25%, rgba(255,255,255,0.65) 50%, rgba(255,255,255,0.35) 75%, transparent 100%);
  animation: shimmer-sweep 1.2s linear infinite;
  z-index: 0;
  pointer-events: none;
  border-radius: inherit;
}

@keyframes shimmer-base {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

@keyframes shimmer-sweep {
  0% {
    transform: translateX(-100%) skewX(-12deg);
    opacity: 0.05;
  }
  10% {
    opacity: 1;
  }
  90% {
    opacity: 1;
  }
  100% {
    transform: translateX(300%) skewX(-12deg);
    opacity: 0.05;
  }
}

.image-loaded .shimmer::before,
.image-loaded .shimmer::after {
  display: none;
  animation: none;
}

/* Image container with fixed aspect ratio to prevent layout shift */
.image-aspect-container {
  position: relative;
  width: 100%;
  overflow: hidden;
}

/* When using fill prop, allow absolute positioning */
.image-aspect-container[style*="position: absolute"] {
  position: absolute !important;
}

.image-aspect-container > img {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  z-index: 1;
}

/* Next.js Image with fill creates a span wrapper */
.image-aspect-container > span {
  position: absolute !important;
  inset: 0 !important;
  width: 100% !important;
  height: 100% !important;
  z-index: 1 !important;
}

.image-aspect-container > span > img {
  object-fit: cover;
  width: 100% !important;
  height: 100% !important;
  position: relative !important;
  z-index: 1 !important;
}

/* Fade-in animation for loaded images */
.image-fade-in {
  animation: imageFadeIn 0.3s ease-in;
}

@keyframes imageFadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}
